%%{init: {'theme': 'base', 'themeVariables': { 'primaryColor': '#1a1a2e', 'primaryTextColor': '#e0e0e0', 'primaryBorderColor': '#4a9eff', 'lineColor': '#4a9eff', 'secondaryColor': '#16213e', 'tertiaryColor': '#0f3460', 'background': '#0d1117', 'mainBkg': '#1a1a2e', 'nodeBorder': '#4a9eff', 'clusterBkg': '#16213e', 'clusterBorder': '#4a9eff', 'edgeLabelBackground': '#1a1a2e', 'fontFamily': 'Inter, Segoe UI, sans-serif', 'fontSize': '14px' }}}%%
flowchart TD
    A["<b>Alertmanager</b>"] -->|webhook| B["<b>LangGraph Orchestrator</b>"]
    B --> C(["<b>START</b>"])

    C --> D["<b>InfraAgent</b><br/><i>Check pod metrics via MCP</i>"]
    C --> E["<b>NfMetricsAgent</b> +<br/><b>NfLogsAgent</b> +<br/><b>UeTracesAgent</b><br/><i>(parallel)</i><br/><i>MCP: Prometheus, Loki</i>"]

    E --> F["<b>EvidenceQuality</b>"]

    D --> G
    F --> G

    G["<b>RCAAgent</b><br/><i>Analyze:</i><br/>â€¢ Infra<br/>â€¢ Metrics<br/>â€¢ Logs<br/>â€¢ UE Traces<br/>â€¢ DAG Cypher deviation"]

    G --> H["<b>RCA summary + artifacts</b>"]
    H --> I(["<b>END</b>"])

    style A fill:#0f3460,stroke:#4a9eff,stroke-width:2px,color:#e0e0e0
    style B fill:#1a1a2e,stroke:#4a9eff,stroke-width:2px,color:#e0e0e0
    style C fill:#16213e,stroke:#e94560,stroke-width:2px,color:#e0e0e0
    style D fill:#1a1a2e,stroke:#4a9eff,stroke-width:2px,color:#e0e0e0
    style E fill:#1a1a2e,stroke:#4a9eff,stroke-width:2px,color:#e0e0e0
    style F fill:#16213e,stroke:#4a9eff,stroke-width:1px,color:#e0e0e0
    style G fill:#0f3460,stroke:#e94560,stroke-width:2px,color:#e0e0e0
    style H fill:#16213e,stroke:#4a9eff,stroke-width:1px,color:#e0e0e0
    style I fill:#16213e,stroke:#e94560,stroke-width:2px,color:#e0e0e0
